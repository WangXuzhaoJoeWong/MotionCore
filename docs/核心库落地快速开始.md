# 核心库落地快速开始（安装态优先：install-tree first）

目标：把“安装产物 = 唯一运行形态”落实成可复制的命令，确保下游只依赖 install prefix 接入。

## 1. 最小构建（MotionCore 独立工程）

```bash
cd MotionCore
mkdir -p build
cd build

cmake .. \
  -DCMAKE_BUILD_TYPE=Release \
  -DWXZ_INSTALL_DOCS=OFF \
  -DCMAKE_INSTALL_PREFIX="$PWD/../_install"

make -j"$(nproc)"
```

## 2. 安装态优先（install-tree first）：生成安装态产物

安装态验证的关键点是：仅依赖安装前缀下的产物与配置样例，避免不小心依赖 build-tree。

## 3. 下游工程使用（find_package）

安装（推荐先安装到工作空间内，免 sudo）：

```bash
cd MotionCore/build
make install

# 或安装到系统前缀（需要权限）
# cd MotionCore/build
# sudo make install
```

下游 CMake：

```cmake
find_package(MotionCore CONFIG REQUIRED)
add_executable(my_app main.cpp)
target_link_libraries(my_app PRIVATE MotionCore::MotionCore)
```

如果你希望“单一前缀”同时包含 FastDDS 依赖，见 [ref/依赖说明.md](ref/依赖说明.md) 的“一前缀自包含模式”说明。

## 4. 常见问题（最小排障）

- 若遇到安装导出/找包问题：优先检查 `find_package(MotionCore CONFIG REQUIRED)` 是否能在安装前缀下工作。
