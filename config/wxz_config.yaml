# WXZ Robot YAML config sample
# Copy to config/wxz_config.yaml and edit as needed

comm:
  type: FastDDS   # FastDDS-only

# 服务发现 / 注册中心配置（占位示例）
discovery:
  # 留空表示关闭 discovery（node_container 会跳过启动，适合离线/本机联调）
  endpoint: ""                                    # 服务注册/拉取节点列表的 HTTP 入口
  heartbeat_period_ms: 2000                        # 心跳上报周期（endpoint 非空才会生效）
  ttl_ms: 6000                                     # 心跳过期时间；接收端超时剔除（兼容键：heartbeat_ttl_ms）
  node_role: "workstation"                        # workstation / central / edge
  node_endpoints:
    - "fastdds:0"                                 # FastDDS 域或 profile 标识

# 通道治理：可选的白/黑名单。若 allow 非空，仅允许名单内；deny 优先级更高。
channel_filters:
  allow: []
  deny: []

threading:
  io_pool:
    threads: 2
  cpu_pool:
    threads: 4
  taskflow:
    threads: 2
  motion_planner:
    threads: 2

# 事件队列与调度
queue:
  max_size: 1024
  high_watermark: 900
  block_when_full: true
  drop_oldest: true

dispatcher:
  max_retries: 2

param_server:
  enable: true
  set_topic: param.set
  ack_topic: param.ack

# 实时模式开关（启用后默认采用同步 publish、提高 transport priority）
realtime_mode: false

# 通道配置（按需添加）。
#
# 当前业务建议：按 Workstation 实际 topic 做最小集合，避免把历史 demo/模板通道写进默认配置。
# 注意：domain 必须与现场 `WXZ_DOMAIN_ID`（以及 Workstation 的 domain）保持一致。
channels:
  ws_arm_command:
    transport: fastdds
    domain: 0
    topic: /arm/command
    max_payload: 8192
    qos:
      reliability: reliable
      history: keep_last
      depth: 16

  ws_arm_status:
    transport: fastdds
    domain: 0
    topic: /arm/status
    max_payload: 8192
    qos:
      reliability: best_effort
      history: keep_last
      depth: 32

  ws_system_alert:
    transport: fastdds
    domain: 0
    topic: /system/alert
    max_payload: 8192
    qos:
      reliability: reliable
      history: keep_last
      depth: 16

  ws_capability_status:
    transport: fastdds
    domain: 0
    topic: capability/status
    max_payload: 2048
    qos:
      reliability: best_effort
      history: keep_last
      depth: 8
